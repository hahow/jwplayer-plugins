import { Story } from "@storybook/addon-docs";

# jwplayer-plugin-track-notes

[![npm version](https://badge.fury.io/js/@hahow%2Fjwplayer-plugin-track-notes.svg)](https://badge.fury.io/js/@hahow%2Fjwplayer-plugin-track-notes)

ğŸš§ **æ­¤åŠŸèƒ½å°šæœªå®Œæˆ** ğŸš§

é€™æ˜¯ä¸€å€‹ JW Player å¤–æ›ï¼Œå…è¨±ä½¿ç”¨è€…åœ¨æ’­æ”¾å™¨çš„æ™‚é–“è»¸ä¸Šæ¨™è¨»ç­†è¨˜ã€‚

## Table of Contents

- [Demo](#demo)
- [External Plugin](#external-plugin)
- [Internal Plugin](#internal-plugin-not-recommended)
- [Configuration](#configuration)
- [Instance](#instance)

## Demo

<Story id="track-notes--track-notes" />

## External Plugin

IIFE æ ¼å¼ï¼ŒJW Player é è¨­ä½¿ç”¨ plugin çš„æ–¹å¼ï¼š

### Vanilla JS

```html
<html>
  <head>
    <script src="{your_cloud_hosted_player_library_url}"></script>
  </head>
  <body>
    <div id="myElement"></div>

    <script type="text/JavaScript">
      jwplayer("myElement").setup({
        "playlist": "{your_playlist_url}",
        "plugins": {
          "//unpkg.com/@hahow/jwplayer-plugin-watermark@latest/dist/iife/trackNotes.js": {
            trackNotes: [
              {
                note: "Hello Track Notes!",
                time: 10,
              },
              {
                note: "The Second Note",
                time: 30,
              },
            ],
            onTrackNoteCreate: (time: number) => {
              // Do something, e.g., call the backend API.
            },
            onTrackNoteUpdate: (trackNote: TrackNoteType) => {
              // Do something, e.g., call the backend API.
            },
          }
        }
      });
    </script>
  </body>
</html>
```

### React JS

ä»¥ [@jwplayer/jwplayer-react](https://github.com/jwplayer/jwplayer-react) ç‚ºä¾‹ï¼Œå…¶å®ƒ framework å¤§åŒå°ç•°ï¼š

```jsx
import JWPlayer from '@jwplayer/jwplayer-react';

const App = () => (
  return (
    <JWPlayer
      library='{your_cloud_hosted_player_library_url}'
      playlist='{your_playlist_url}'
      config={{
        plugins: {
          "//unpkg.com/@hahow/jwplayer-plugin-track-notes@latest/dist/iife/trackNotes.js": {
            trackNotes: [
              {
                note: "Hello Track Notes!",
                time: 10,
              },
              {
                note: "The Second Note",
                time: 30,
              },
            ],
            onTrackNoteCreate: (time: number) => {
              // Do something, e.g., call the backend API.
            },
            onTrackNoteUpdate: (trackNote: TrackNoteType) => {
              // Do something, e.g., call the backend API.
            },
          }
        },
      }}
    />
  );
);
```

## Internal Plugin (not recommended)

CJS & EMS æ ¼å¼ï¼Œéå®˜æ–¹ä½¿ç”¨ plugin çš„æ–¹å¼ï¼Œä¸å»ºè­°ä½¿ç”¨ï¼š

1. `npm install @hahow/jwplayer-plugin-track-notes`
1. è¼‰å…¥ plugin module `TrackNotesPlugin`
1. å»ºç«‹ä¸€ä»½ç©ºçš„ `trackNotes.js`ï¼Œæ”¾åœ¨ application å¯ä»¥è®€å–çš„ä½ç½®ï¼ˆä¾‹å¦‚ `/`ï¼‰
1. ä½¿ç”¨ JWP çš„ `registerPlugin()` API è¨»å†Š plugin

```jsx
import JWPlayer from '@jwplayer/jwplayer-react';

import { TrackNotesPlugin } from "@hahow/jwplayer-plugin-track-notes";

const App = () => (
  return (
    <JWPlayer
      library='{your_cloud_hosted_player_library_url}'
      playlist='{your_playlist_url}'
      config={{
        plugins: {
          "/trackNotes.js": {
            trackNotes: [
              {
                note: "Hello Track Notes!",
                time: 10,
              },
              {
                note: "The Second Note",
                time: 30,
              },
            ],
            onTrackNoteCreate: (time: number) => {
              // Do something, e.g., call the backend API.
            },
            onTrackNoteUpdate: (trackNote: TrackNoteType) => {
              // Do something, e.g., call the backend API.
            },
          }
        },
      }}
      didMountCallback={({ player }) => {
        player.registerPlugin("trackNotes", "8.0", TrackNotesPlugin);
      }}
    />
  );
);
```

## Configuration

| config              | type                                                   | default     | description             |
| ------------------- | ------------------------------------------------------ | ----------- | ----------------------- |
| `onTrackNoteCreate` | `(time: number) => void`                               | `undefined` | æ–°å¢ç­†è¨˜æ¨™è¨»çš„ callback |
| `onTrackNoteUpdate` | `(trackNote: { note: string; time: number; }) => void` | `undefined` | æ›´æ–°ç­†è¨˜æ¨™è¨»çš„ callback |
| `trackNotes`        | `Array<{ note: string; time: number; }>`               | `undefined` | ç­†è¨˜æ¨™è¨»å…§å®¹            |

## Instance

ğŸš§
